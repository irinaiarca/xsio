{"ts":1359657668573,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"_first = true\nclass LinkManager extends BaseObject\n\n\tconstructor: (@history = [], @routes = []) -> window.addEventListener \"popstate\", ( (e) => if _first then return _first = false; else do @checkRoute); @echo \"LinkManager Activated!\"\n\tsetRoutes: (routePatterns) =>\n\t\tfor route, handler of routePatterns\n\t\t\t@routes.push route: route, handler: handler\n\t\tdo @checkRoute\n\t\t\t\n\tcheckRoute: (after = \"\") =>\n\t\tif after[0] is \"/\" then loc = after\n\t\telse loc = window.location.pathname + after\n\t\t_baseLoc = loc\n\t\tloc = loc.substr 0, loc.length - 1 if loc[loc.length - 1] is \"/\"\n\t\t_loc = loc\n\t\tfor routeSet in @routes\n\t\t\tloc = _loc.split \"/\"\n\n\t\t\troute = routeSet.route\n\t\t\troute = route.substr 0, route.length - 1 if route[route.length - 1] is \"/\"\n\t\t\troute = route.split \"/\"\n\n\t\t\targs = []\n\n\t\t\tres = true\n\t\t\twhile route.length and res\n\t\t\t\tr = do route.shift\n\t\t\t\tl = do loc.shift\n\t\t\t\tif r[0] is \":\" then args[r.substr 1] = l\n\t\t\t\telse\n\t\t\t\t\tif r isnt l then res = false\n\n\t\t\tif res and loc.length is 0 then document.body.setAttribute(\"id\", _baseLoc.substr 1); return routeSet.handler args\n\t\t\telse continue\n\t\tdocument.body.innerHTML = DepMan.render 404, title: \"ATLAS\", text: \"404\", reason: \"This page either does not exist, or it is hidden.\", message: \"\"\"\n\t\t\t\tWhy would it be hidden? Well, monkeys are always rapaging through the labs, and sometimes want to play hide and seek with our pages.\n\n\t\t\t\tThat, or  you don't have permission to view those files.\n\t\t\"\"\"\n\t\tdo @linkAllAnchors\n\t\treturn false\n\n\t\t\t\n\t\n\tlink: (e) =>\n\t\tel = @getParentAnchor e.srcElement\n\t\tif @checkRoute(el.getAttribute \"href\") then history.pushState null, null, el.href\n\t\te.preventDefault()\n\n\tgetParentAnchor: (e) =>\n\t\treturn null if not e?\n\t\tif e.tagName is \"A\" then return e\n\t\treturn @getParentAnchor e.parentNode\n\n\tlinkAllAnchors: =>\n\t\tanchors = document.querySelectorAll(\"a\")\n\t\tanchor.addEventListener \"click\", @link for anchor in anchors\n\nclass LinkErrorReporter extends IS.Object\n\n\t@errorGroups = []\n\t@errorGroupMap = []\n\t@errorMessages = []\n\n\t@extend IS.ErrorReporter\n\n\nmodule.exports = LinkManager\n"]],"start1":0,"start2":0,"length1":0,"length2":2059}]],"length":2059}
{"contributors":["sabinmarcu@gmail.com"],"silentsave":false,"ts":1360787017638,"patch":[[{"diffs":[[0,"res = false\n"],[1,"\t\t\tid = _baseLoc.substr 1\n\t\t\tif id is \"\" then id = \"index\""],[0,"\n\t\t\tif res a"]],"start1":943,"start2":943,"length1":24,"length2":82},{"diffs":[[0,"e(\"id\", "],[-1,"_baseLoc.substr 1"],[1,"id"],[0,"); retur"]],"start1":1074,"start2":1074,"length1":33,"length2":18}]],"length":2102,"saved":false}
{"contributors":[],"silentsave":false,"ts":1360787592470,"patch":[[{"diffs":[[0,"e: \""],[-1,"ATLAS"],[1,"Bullshit?"],[0,"\", t"]],"start1":1184,"start2":1184,"length1":13,"length2":17}]],"length":2106,"saved":false}
