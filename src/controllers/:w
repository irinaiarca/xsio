class DnD extends BaseObject

	constructor: ->
		document.addEventListener "dragenter", @dragEnter, false
		document.addEventListener "dragexit", @dragExit, false
		document.addEventListener "dragleave", @dragExit, false
		document.querySelector(".dragdropplaceholder").addEventListener "dragover", @dragOver, false
		document.querySelector(".dragdropplaceholder").addEventListener "drop", @dragHandler, false

	dragEnter: (e) ->
		document.querySelector(".dragdropplaceholder").className += " active"
		do e.stopPropagation
		do e.preventDefault

	dragExit: (e) ->
		ph = document.querySelector(".dragdropplaceholder")
		console.log ph.className
		ph.className = ph.className.replace /\ ?active/, ""
		console.log "exit"
		do e.stopPropagation
		do e.preventDefault

	dragOver: (e) ->
		ph = document.querySelector(".dragdropplaceholder")
		ph.className = ph.className.replace /\ ?hover/, ""
		ph.className += " hover"
		do e.stopPropagation
		do e.preventDefault

	dragHandler: (e) ->
		do e.stopPropagation
		do e.preventDefault

		ph = document.querySelector(".dragdropplaceholder")
		ph.className = ph.className.replace /\ ?(hover|active)/, ""

		files = e.dataTransfer.files
		for file in files
			reader = new FileReader
			reader.onload = @readHandler
			reader.readAsDataURL file

	readHandler: (file) ->
		console.log file
		

module.exports = DnD

class DnDER extends IS.Object

	@errorGroups = []
	@errorGroupMap = []
	@errorMessages = []

	@extend IS.ErrorReporter
